<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Frikilam</title>

  <!-- CSS -->
  <link rel="stylesheet" href="/css/globals.css" />
  <link rel="stylesheet" href="/css/page.css" />
  <link rel="stylesheet" href="/css/tienda.css" />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet" crossorigin="anonymous" />

  <!-- JS principal -->
  <script src="/js/main.js" defer></script>
</head>
<body>
  <header>
    <div class="header">
      <a href="/"><img src="/IMG/LOGO.png" alt="logo" class="logo" /></a>

      <!-- FILTRAR -->
      <nav class="desplegable">
        <ul>
          <li class="menu">
            <a href="#">Filtrar</a>
            <div class="dropdown">
              <!-- Anime -->
              <div class="sub-submenu">
                <a href="#">Anime</a>
                <div class="sub-sub-dropdown">
                  <a href="#" class="subcategory" data-path="Anime/Ataque_a_los_titanes">Ataque a los Titanes</a>
                  <a href="#" class="subcategory" data-path="Anime/Death_note">Death Note</a>
                  <a href="#" class="subcategory" data-path="Anime/Demon_Slayer">Demon Slayer</a>
                  <a href="#" class="subcategory" data-path="Anime/Dragon_Ball">Dragon Ball</a>
                  <a href="#" class="subcategory" data-path="Anime/Jujutsu_Kaise">Jujutsu Kaisen</a>
                  <a href="#" class="subcategory" data-path="Anime/Naruto">Naruto</a>
                  <a href="#" class="subcategory" data-path="Anime/One_Piece">One Piece</a>
                </div>
              </div>
              <!-- DC -->
              <div class="sub-submenu">
                <a href="#">DC</a>
                <div class="sub-sub-dropdown">
                  <a href="#" class="subcategory" data-path="DC/Arrow">Arrow</a>
                  <a href="#" class="subcategory" data-path="DC/Batman">Batman</a>
                  <a href="#" class="subcategory" data-path="DC/Wonder_woman">Wonder Woman</a>
                </div>
              </div>
              <!-- Marvel -->
              <div class="sub-submenu">
                <a href="#">Marvel</a>
                <div class="sub-sub-dropdown">
                  <a href="#" class="subcategory" data-path="Marvel/Ant-man_&_the-wasp">Ant-Man</a>
                  <a href="#" class="subcategory" data-path="Marvel/Avengers">Avengers</a>
                  <a href="#" class="subcategory" data-path="Marvel/Black_panter">Black Panther</a>
                  <a href="#" class="subcategory" data-path="Marvel/Black_widow">Black Widow</a>
                  <a href="#" class="subcategory" data-path="Marvel/Capitan_America">Capit√°n Am√©rica</a>
                  <a href="#" class="subcategory" data-path="Marvel/Deadpool">Deadpool</a>
                  <a href="#" class="subcategory" data-path="Marvel/Doctor_strange">Doctor Strange</a>
                  <a href="#" class="subcategory" data-path="Marvel/Guardianes_de_la_Galaxia">Guardianes de la Galaxia</a>
                  <a href="#" class="subcategory" data-path="Marvel/Iron_man">Iron Man</a>
                  <a href="#" class="subcategory" data-path="Marvel/Spiderman">Spiderman</a>
                  <a href="#" class="subcategory" data-path="Marvel/Thor">Thor</a>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </nav>

      <!-- BUSCADOR -->
      <div class="search_cont">
        <div class="search_box">
          <input id="searchInput" type="text" placeholder="Buscar..." />
          <span id="clearIcon" class="clear" style="display:none;">√ó</span>
        </div>
      </div>

      <!-- ICONOS DE CABECERA -->
      <nav class="nav">
        <ul class="menu">
          <li><button id="favorites-button" class="icon-button" title="Favoritos">‚ù§Ô∏è</button></li>
          <li><button id="cart-icon" class="icon-button">üõí <span id="cart-count">0</span></button></li>
          <li>
            <button id="user-button" class="icon-button user-icon">
              üë§
              <span id="user-name-display"></span>
            </button>
            <button id="logout-button" style="display:none;">Cerrar sesi√≥n</button>
          </li>


        </ul>
      </nav>
    </div>
  </header>

  <!-- GALER√çA PRINCIPAL -->
  <main>
    <div id="imageGallery" class="gallery-container"></div>
  </main>

  <!-- MODAL FAVORITOS -->
<div id="favorites-modal" class="hidden">
  <div class="favorites-modal-content">
    <button id="close-favorites" class="close-favorites">‚úñ</button>
    <h2>Mis Favoritos</h2>
    <div id="favorites-gallery">
    </div>
  </div>
</div>
  
<!-- Bot√≥n de carrito con contador -->
<button id="cart-icon">
    üõí
    <span id="cart-item-count">0</span> <!-- Aqu√≠ aparecer√° el n√∫mero de art√≠culos -->
</button>

<!-- Modal del carrito -->
<div id="cart-modal" class="cart-hidden">
    <div class="cart-overlay"></div>
    <div class="cart-content">
        <button class="close-button">‚úñ</button>
        <div id="cart-items"></div>
        <div id="cart-total"></div>
        <div id="iva"></div>
        <div id="envio"></div>
        <div id="total-a-pagar"></div>
        <button id="pay-button" class="btn-pay">Pagar</button>
    </div>
</div>


<!-- Modal de Pago -->
<div id="payment-modal" class="cart-hidden">
    <div class="cart-overlay"></div>
    <div class="payment-content">
        <button class="close-button">‚úñ</button>
        <h2>Detalles de Pago</h2>
        <form id="payment-form">
            <label for="name">Nombre:</label>
            <input type="text" id="name" required />

            <label for="address">Direcci√≥n:</label>
            <input type="text" id="address" required />

            <label for="city">Ciudad:</label>
            <input type="text" id="city" required />

            <label for="province">Provincia:</label>
            <input type="text" id="province" required />

            <label for="postal-code">C√≥digo Postal:</label>
            <input type="text" id="postal-code" maxlength="5" required />

            <label for="card-number">N√∫mero de tarjeta:</label>
            <input type="text" id="card-number" maxlength="16" required />

            <label for="cvv">CVV:</label>
            <input type="text" id="cvv" maxlength="3" required />

            <button type="submit" class="btn-pay">Confirmar pago</button>
        </form>
    </div>
</div>



  <!-- MODAL CHECKOUT -->
  <div id="checkout-form" class="hidden">
    <div class="modal-content">
      <span class="close-button" id="close-checkout" aria-label="Cerrar">&times;</span>
      <h2>Datos de Facturaci√≥n</h2>
      <form id="payment-form">
        <input id="nombre" name="nombre" placeholder="Nombre completo" required><br>
        <input id="email" name="email" type="email" placeholder="Email" required><br>
        <input id="telefono" name="telefono" placeholder="Tel√©fono" required><br>
        <input id="direccion" name="direccion" placeholder="Direcci√≥n" required><br>
        <input id="ciudad" name="ciudad" placeholder="Ciudad" required><br>
        <input id="provincia" name="provincia" placeholder="Provincia" required><br>
        <input id="codigo-postal" name="codigo-postal" placeholder="C√≥digo Postal" required><br>
        <input id="tarjeta" name="tarjeta" placeholder="N√∫mero de tarjeta" required><br>
        <input id="exp" name="exp" placeholder="MM/AA" required>
        <span id="exp-error" style="display:none;color:red;">Fecha inv√°lida</span><br>
        <input id="cvc" name="cvc" placeholder="CVC" required><br>
        <button type="submit">Pagar</button>
      </form>
    </div>
  </div>

  <!-- OVERLAY -->
  <div id="modal-overlay" class="modal-overlay hidden"></div>

<!-- MODAL USUARIO -->
<div id="user-modal" class="hidden">
  <div class="user-modal-content" style="background:white; color:rgb(56, 56, 56); padding:20px; border-radius:8px; width:300px; max-width:90%; margin:auto; position:relative;">
    
    <span id="close-user-modal" class="close-button" style="position:absolute; top:10px; right:15px; cursor:pointer; font-size:20px;" aria-label="Cerrar">&times;</span>

    <!-- ============================== -->
    <!--      SECCI√ìN LOGIN (NO LOGUEADO) -->
    <!-- ============================== -->
    <div id="login-section">
      <h2 style="text-align:center;">Iniciar Sesi√≥n</h2>

      <input type="email" id="login-email" placeholder="Correo electr√≥nico" style="width:100%; margin:5px 0; padding:5px;" required>
      <input type="password" id="login-password" placeholder="Contrase√±a" style="width:100%; margin:5px 0; padding:5px;" required>

      <button id="login-btn" style="width:100%; margin:5px 0; padding:5px; cursor:pointer;">
        Iniciar sesi√≥n
      </button>

      <!-- BOT√ìN PARA RECUPERAR CONTRASE√ëA -->
      <button id="forgot-password-btn" 
        style="width:100%; margin:5px 0; padding:5px; cursor:pointer; background:#f0f0f0;">
        ¬øOlvidaste tu contrase√±a?
      </button>
    </div>

    <!-- ============================== -->
    <!--      SECCI√ìN REGISTRO (NO LOGUEADO) -->
    <!-- ============================== -->
    <div id="register-section">
      <hr>

      <h2 style="text-align:center;">Registrar Usuario</h2>

      <input type="email" id="register-email" placeholder="Correo electr√≥nico" style="width:100%; margin:5px 0; padding:5px;" required>
      <input type="password" id="register-password" placeholder="Contrase√±a" style="width:100%; margin:5px 0; padding:5px;" required>

      <button id="register-btn" style="width:100%; margin:5px 0; padding:5px; cursor:pointer;">
        Registrar
      </button>
    </div>

    <!-- ============================== -->
    <!--     SECCI√ìN LOGUEADO  -->
    <!-- ============================== -->
    <div id="user-options-section" hidden>

      <h2 style="text-align:center;">Opciones de Cuenta</h2>

      <button id="logout-inside-modal" 
              style="width:100%; margin:5px 0; padding:5px; cursor:pointer; background:#676666; color:white;">
        Cerrar sesi√≥n
      </button>

      <button id="open-update-section" style="width:100%; margin:5px 0; padding:5px; cursor:pointer;">
        Modificar usuario
      </button>

      <button id="delete-user-btn" 
              style="width:100%; margin:5px 0; padding:5px; cursor:pointer; background:#4b0101; color:white;">
        Eliminar usuario
      </button>

    </div>

    <!-- ============================== -->
    <!--  SECCI√ìN MODIFICAR USUARIO  -->
    <!-- ============================== -->
    <section id="gestionUsuarios" hidden style="margin-top: 20px;">

      <h2>Modificar Usuario</h2>

      <input type="email" id="update-email" placeholder="Nuevo correo" style="width:100%; margin:5px 0; padding:5px;">
      <input type="password" id="update-password" placeholder="Nueva contrase√±a" style="width:100%; margin:5px 0; padding:5px;">

      <button id="update-user-btn" style="width:100%; margin:5px 0; padding:5px; cursor:pointer;">
        Guardar cambios
      </button>

    </section>

  </div>
</div>


  <!-- GESTI√ìN DE USUARIOS -->
  <section id="gestionUsuarios" hidden style="margin: 20px;">
    <h2>Gesti√≥n de Usuarios</h2>
    <form id="formCrearUsuario">
      <input type="text" id="usuario-nombre" placeholder="Nombre" required>
      <input type="email" id="usuario-email" placeholder="Email" required>
      <input type="password" id="usuario-password" placeholder="Password" required>
      <select id="usuario-rol">
        <option value="usuario">Usuario</option>
        <option value="admin">Admin</option>
      </select>
      <button type="submit">Crear Usuario</button> 
    </form>
  </section>

    <!-- BOT√ìN PARA RECUPERAR CONTRASE√ëA -->
    <button id="forgot-password-btn" 
      style="width:100%; margin:5px 0; padding:5px; cursor:pointer; background:#f0f0f0;">
      ¬øOlvidaste tu contrase√±a?
    </button>

    <hr>

    <h2 style="text-align:center;">Registrar Usuario</h2>
    <input type="email" id="register-email" placeholder="Correo electr√≥nico" style="width:100%; margin:5px 0; padding:5px;" required>
    <input type="password" id="register-password" placeholder="Contrase√±a" style="width:100%; margin:5px 0; padding:5px;" required>

    <button id="register-btn" style="width:100%; margin:5px 0; padding:5px; cursor:pointer;">
      Registrar
    </button>
  
  </div>
</div>

<script>
  // Funci√≥n al hacer clic en "¬øOlvidaste tu contrase√±a?"
 document.getElementById("forgot-password-btn").addEventListener("click", function() {
    // Abrir modal de recuperaci√≥n
    document.getElementById("forgot-modal").classList.remove("hidden");
});
</script>

<!-- MODAL RECUPERAR CONTRASE√ëA -->
<div id="forgot-modal" class="hidden forgot-modal">
  <div style="background:white; padding:20px; border-radius:8px; width:300px;">
    <h3>Recuperar contrase√±a</h3>
    <input type="email" id="forgot-email" placeholder="Ingresa tu correo" 
           style="width:100%; padding:5px; margin:5px 0;">
    <input type="password" id="new-password" placeholder="Nueva contrase√±a" 
           style="width:100%; padding:5px; margin:5px 0;">
    <button id="send-recovery-btn" style="width:100%; padding:5px; margin-top:5px;">
      Cambiar contrase√±a
    </button>
    <button onclick="closeForgotModal()" style="width:100%; padding:5px; margin-top:5px;">
      Cancelar
    </button>
  </div>
</div>











  
</body>
</html>
